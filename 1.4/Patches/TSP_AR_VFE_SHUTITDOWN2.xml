<?xml version="1.0" encoding="utf-8"?>

<Patch>
  <Operation Class="PatchOperationConditional">
    <!-- Does this exist? -->
    <xpath>/Defs/ThingDef[defName="VFEC_Apparel_LegionnaireArmor"]</xpath>
    <!-- If it does, do this replacement. -->
    <match Class="PatchOperationReplace">
      <success>Always</success>
      <xpath>/Defs/FactionDef[defName="AR_Faction_Hellas"]/caravanTraderKinds</xpath>
      <value>
        <caravanTraderKinds>
          <li>VFEC_Caravan_Republic_BulkGoods</li>
          <li>VFEC_Caravan_Republic_WarMerchant</li>
          <li>VFEC_Caravan_Republic_Slaver</li>
          <li MayRequire="OskarPotocki.VanillaFactionsExpanded.MedievalModule">VFEM_Caravan_Medieval_WineMerchant</li>
        </caravanTraderKinds>
      </value>
    </match>
    <!-- If the first XPATH does not exist, the original code stands. -->
  </Operation>
  <Operation Class="PatchOperationConditional">
    <!-- Does this exist? -->
    <xpath>/Defs/ThingDef[defName="VFEC_Apparel_LegionnaireArmor"]</xpath>
    <!-- If it does, do this replacement. -->
    <match Class="PatchOperationReplace">
      <success>Always</success>
      <xpath>/Defs/FactionDef[defName="AR_Faction_Hellas"]/baseTraderKinds</xpath>
      <value>
        <baseTraderKinds>
          <li>VFEC_Base_Republic_Standard</li>
          <li MayRequire="zal.legionaryequipment">Base_Roman_Standard</li>
        </baseTraderKinds>
      </value>
    </match>
    <!-- If the first XPATH does not exist, the original code stands. -->
  </Operation>











  <Operation Class="PatchOperationConditional">
    <!-- Does this exist? -->
    <xpath>/Defs/ThingDef[defName="VFEC_Apparel_LegionnaireArmor"]</xpath>
    <!-- If it does, do this replacement. -->
    <match Class="PatchOperationReplace">
      <success>Always</success>
      <xpath>/Defs/PawnKindDef[defName="VFEC_RepublicSenator"]/apparelTags</xpath>
      <value>
        <apparelTags Inherit="False">
          <li>Hellenic</li>
          <li>RomeNoble</li>
          <li>Cape</li>
        </apparelTags>
      </value>
    </match>
    <!-- If the first XPATH does not exist, the original code stands. -->
  </Operation>
  <Operation Class="PatchOperationConditional">
    <!-- Does this exist? -->
    <xpath>/Defs/ThingDef[defName="VFEC_Apparel_LegionnaireArmor"]</xpath>
    <!-- If it does, do this replacement. -->
    <match Class="PatchOperationReplace">
      <success>Always</success>
      <xpath>/Defs/PawnKindDef[@Name="VFEC_RepublicPawnBase"]</xpath>
      <value>
        <PawnKindDef Name="VFEC_RepublicPawnBase" Abstract="True">
          <race>Human</race>
          <defaultFactionType>AR_Faction_Hellas</defaultFactionType>
          <maxGenerationAge>55</maxGenerationAge>
          <chemicalAddictionChance>0.09</chemicalAddictionChance>
          <invNutrition>3</invNutrition>
          <invFoodDef>VFEC_Jerky</invFoodDef>
          <techHediffsTags>
            <li>Poor</li>
            <li>Simple</li>
          </techHediffsTags>
          <techHediffsChance>0.15</techHediffsChance>
          <techHediffsMoney>50~100</techHediffsMoney>
          <apparelTags>
            <li>RomeCivil</li>
            <li>Hellenic</li>
            <li>Classical</li>
          </apparelTags>
          <inventoryOptions>
            <skipChance>0.38</skipChance>
            <subOptionsChooseOne>
              <li>
                <choiceChance>33</choiceChance>
                <thingDef>AR_RawOlives</thingDef>
                <countRange>
                  <min>15</min>
                  <max>55</max>
                </countRange>
              </li>
              <li>
                <choiceChance>33</choiceChance>
                <thingDef>AR_OliveOil</thingDef>
                <countRange>
                  <min>15</min>
                  <max>40</max>
                </countRange>
              </li>
              <li>
                <choiceChance>15</choiceChance>
                <thingDef>AR_RawArtichoke</thingDef>
                <countRange>
                  <min>15</min>
                  <max>40</max>
                </countRange>
              </li>
              <li>
                <choiceChance>33</choiceChance>
                <thingDef>AR_RawPomegranate</thingDef>
                <countRange>
                  <min>15</min>
                  <max>40</max>
                </countRange>
              </li>
              <li>
                <choiceChance>45</choiceChance>
                <thingDef>VFEC_Jerky</thingDef>
                <countRange>
                  <min>20</min>
                  <max>25</max>
                </countRange>
              </li>
            </subOptionsChooseOne>
          </inventoryOptions>
        </PawnKindDef>
      </value>
    </match>
    <!-- If the first XPATH does not exist, the original code stands. -->
  </Operation>
  <Operation Class="PatchOperationConditional">
    <!-- Does this exist? -->
    <xpath>/Defs/ThingDef[defName="VFEC_Apparel_LegionnaireArmor"]</xpath>
    <!-- If it does, do this replacement. -->
    <match Class="PatchOperationReplace">
      <success>Always</success>
      <xpath>/Defs/PawnKindDef[defName="VFEC_RepublicVillager"]/label</xpath>
      <value>
        <label>colonus</label>
        <labelPlural>coloni</labelPlural>
      </value>
    </match>
    <!-- If the first XPATH does not exist, the original code stands. -->
  </Operation>
  <Operation Class="PatchOperationConditional">
    <!-- Does this exist? -->
    <xpath>/Defs/ThingDef[defName="VFEC_Apparel_LegionnaireArmor"]</xpath>
    <!-- If it does, do this replacement. -->
    <match Class="PatchOperationReplace">
      <success>Always</success>
      <xpath>/Defs/PawnKindDef[defName="VFEC_RepublicVillager"]/combatPower</xpath>
      <value>
        <combatPower>10</combatPower>
      </value>
    </match>
    <!-- If the first XPATH does not exist, the original code stands. -->
  </Operation>
  <Operation Class="PatchOperationConditional">
    <!-- Does this exist? -->
    <xpath>/Defs/ThingDef[defName="VFEC_Apparel_LegionnaireArmor"]</xpath>
    <!-- If it does, do this replacement. -->
    <match Class="PatchOperationReplace">
      <success>Always</success>
      <xpath>/Defs/PawnKindDef[defName="VFEC_RepublicVillager"]/initialResistanceRange</xpath>
      <value>
        <initialResistanceRange>1~2</initialResistanceRange>
      </value>
    </match>
    <!-- If the first XPATH does not exist, the original code stands. -->
  </Operation>
  <Operation Class="PatchOperationConditional">
    <!-- Does this exist? -->
    <xpath>/Defs/ThingDef[defName="VFEC_Apparel_LegionnaireArmor"]</xpath>
    <!-- If it does, do this replacement. -->
    <match Class="PatchOperationReplace">
      <success>Always</success>
      <xpath>/Defs/PawnKindDef[defName="VFEC_RepublicVillager"]/itemQuality</xpath>
      <value>
        <itemQuality>Poor</itemQuality>
      </value>
    </match>
    <!-- If the first XPATH does not exist, the original code stands. -->
  </Operation>

  <Operation Class="PatchOperationConditional">
    <!-- Does this exist? -->
    <xpath>/Defs/ThingDef[defName="VFEC_Apparel_LegionnaireArmor"]</xpath>
    <!-- If it does, add this. -->
    <match Class="PatchOperationAdd">
      <success>Always</success>
      <xpath>/Defs/PawnKindDef[defName="VFEC_RepublicVillager"]/weaponTags</xpath>
      <value>
        <li>Toolagri</li>
        <!-- <li>NeolithicMelee</li> -->
        <li>NeolithicMeleeBasic</li>
        <li>Knife</li>
      </value>
    </match>
    <!-- If the first XPATH does not exist, the original code stands. -->
  </Operation>
  <Operation Class="PatchOperationConditional">
    <!-- Does this exist? -->
    <xpath>/Defs/ThingDef[defName="VFEC_Apparel_LegionnaireArmor"]</xpath>
    <!-- If it does, add this. -->
    <match Class="PatchOperationAdd">
      <success>Always</success>
      <xpath>/Defs/PawnKindDef[defName="VFEC_RepublicVillager"]/apparelTags</xpath>
      <value>
        <li>Tribal</li>
      </value>
    </match>
    <!-- If the first XPATH does not exist, the original code stands. -->
  </Operation>
  <Operation Class="PatchOperationConditional">
    <!-- Does this exist? -->
    <xpath>/Defs/ThingDef[defName="VFEC_Apparel_LegionnaireArmor"]</xpath>
    <!-- If it does, add this. -->
    <match Class="PatchOperationAdd">
      <success>Always</success>
      <xpath>/Defs/PawnKindDef[defName="VFEC_RepublicTrader"]/weaponTags</xpath>
      <value>
        <li>Lance</li>
        <li>SpearMen</li>
        <li>Javiliner</li>
      </value>
    </match>
    <!-- If the first XPATH does not exist, the original code stands. -->
  </Operation>
  <Operation Class="PatchOperationConditional">
    <!-- Does this exist? -->
    <xpath>/Defs/ThingDef[defName="VFEC_Apparel_LegionnaireArmor"]</xpath>
    <!-- If it does, add this. -->
    <match Class="PatchOperationAdd">
      <success>Always</success>
      <xpath>/Defs/PawnKindDef[defName="VFEC_TownGuard"]/weaponTags</xpath>
      <value>
        <li>Lance</li>
        <li>SpearMen</li>
        <li>Spear</li>
        <li>SimpleSpear</li>
        <li>HellenicSoldier</li>
        <li>Slinger</li>
        <li>Knife</li>
      </value>
    </match>
    <!-- If the first XPATH does not exist, the original code stands. -->
  </Operation>
  <Operation Class="PatchOperationConditional">
    <!-- Does this exist? -->
    <xpath>/Defs/ThingDef[defName="VFEC_Apparel_LegionnaireArmor"]</xpath>
    <!-- If it does, add this. -->
    <match Class="PatchOperationAdd">
      <success>Always</success>
      <xpath>/Defs/PawnKindDef[defName="VFEC_TownGuard"]/apparelTags</xpath>
      <value>
        <li>ClassicalMilitary</li>
        <li>HellenicSoldier</li>
      </value>
    </match>
    <!-- If the first XPATH does not exist, the original code stands. -->
  </Operation>
  <Operation Class="PatchOperationConditional">
    <!-- Does this exist? -->
    <xpath>/Defs/ThingDef[defName="VFEC_Apparel_LegionnaireArmor"]</xpath>
    <!-- If it does, add compatibility for this Mod Comp. -->
    <match Class="PatchOperationAddModExtension">
      <success>Always</success>
      <xpath>/Defs/PawnKindDef[defName="VFEC_TownGuard"]</xpath>
      <value>
        <li Class="PawnShields.ShieldPawnGeneratorProperties">
          <shieldMoney>
            <min>200</min>
            <max>600</max>
          </shieldMoney>
          <shieldTags>
            <li>ShieldsGreekLight</li>
            <li>ShieldsGreek</li>
          </shieldTags>
        </li>
      </value>
    </match>
    <!-- If the first XPATH does not exist, the original code stands. -->
  </Operation>
  <Operation Class="PatchOperationConditional">
    <!-- Does this exist? -->
    <xpath>/Defs/ThingDef[defName="VFEC_Apparel_LegionnaireArmor"]</xpath>
    <!-- If it does, do this replacement. -->
    <match Class="PatchOperationReplace">
      <success>Always</success>
      <xpath>/Defs/PawnKindDef[defName="VFEC_TownGuard"]/weaponMoney</xpath>
      <value>
        <weaponMoney>
          <min>100</min>
          <max>320</max>
        </weaponMoney>
      </value>
    </match>
    <!-- If the first XPATH does not exist, the original code stands. -->
  </Operation>
  <Operation Class="PatchOperationConditional">
    <!-- Does this exist? -->
    <xpath>/Defs/ThingDef[defName="VFEC_Apparel_LegionnaireArmor"]</xpath>
    <!-- If it does, do this replacement. -->
    <match Class="PatchOperationReplace">
      <success>Always</success>
      <xpath>/Defs/PawnKindDef[defName="VFEC_TownGuard"]/apparelMoney</xpath>
      <value>
        <apparelMoney>
          <min>350</min>
          <max>480</max>
        </apparelMoney>
      </value>
    </match>
    <!-- If the first XPATH does not exist, the original code stands. -->
  </Operation>
  <Operation Class="PatchOperationConditional">
    <!-- DO THE GENTILES KNOW? -->
    <xpath>/Defs/ThingDef[defName="VFEC_Apparel_LegionnaireArmor"]</xpath>
    <!-- If they do, SHUT IT DOWN. -->
    <match Class="PatchOperationRemove">
      <success>Always</success>
      <xpath>/Defs/PawnKindDef[defName="VFEC_TownGuard"]/apparelRequired</xpath>
    </match>
    <!-- If the first XPATH does not exist, the original code stands. -->
  </Operation>
  <Operation Class="PatchOperationConditional">
    <!-- Does this exist? -->
    <xpath>/Defs/ThingDef[defName="VFEC_Apparel_LegionnaireArmor"]</xpath>
    <!-- If it does, add this. -->
    <match Class="PatchOperationAdd">
      <success>Always</success>
      <xpath>/Defs/PawnKindDef[defName="VFEC_RepublicArcher"]/weaponTags</xpath>
      <value>
        <li>BowMen</li>
        <li>Gastraphetes</li>
      </value>
    </match>
    <!-- If the first XPATH does not exist, the original code stands. -->
  </Operation>
  <Operation Class="PatchOperationConditional">
    <!-- Does this exist? -->
    <xpath>/Defs/ThingDef[defName="VFEC_Apparel_LegionnaireArmor"]</xpath>
    <!-- If it does, add this. -->
    <match Class="PatchOperationAdd">
      <success>Always</success>
      <xpath>/Defs/PawnKindDef[defName="VFEC_RepublicAuxilia"]/weaponTags</xpath>
      <value>
        <li>Javiliner</li>
      </value>
    </match>
    <!-- If the first XPATH does not exist, the original code stands. -->
  </Operation>
  <Operation Class="PatchOperationConditional">
    <!-- Does this exist? -->
    <xpath>/Defs/ThingDef[defName="VFEC_Apparel_LegionnaireArmor"]</xpath>
    <!-- If it does, do this replacement. -->
    <match Class="PatchOperationReplace">
      <success>Always</success>
      <xpath>/Defs/PawnKindDef[defName="VFEC_Legionnaire"]/weaponTags</xpath>
      <value>
        <weaponTags>
          <li>RomeSoldier</li>
          <li>Sword</li>
          <li>LongSword</li>
          <li>Lance</li>
        </weaponTags>
      </value>
    </match>
    <!-- If the first XPATH does not exist, the original code stands. -->
  </Operation>
  <Operation Class="PatchOperationConditional">
    <!-- Does this exist? -->
    <xpath>/Defs/ThingDef[defName="VFEC_Apparel_LegionnaireArmor"]</xpath>
    <!-- If it does, add this. -->
    <match Class="PatchOperationAdd">
      <success>Always</success>
      <xpath>/Defs/PawnKindDef[defName="VFEC_Legionnaire"]/apparelTags</xpath>
      <value>
        <li>RomeLegion</li>
      </value>
    </match>
    <!-- If the first XPATH does not exist, the original code stands. -->
  </Operation>
  <Operation Class="PatchOperationConditional">
    <!-- Does this exist? -->
    <xpath>/Defs/ThingDef[defName="VFEC_Apparel_LegionnaireArmor"]</xpath>
    <!-- If it does, do this replacement. -->
    <match Class="PatchOperationReplace">
      <success>Always</success>
      <xpath>/Defs/PawnKindDef[defName="VFEC_Centurion"]/weaponTags</xpath>
      <value>
        <weaponTags>
          <li>RomeSoldier</li>
          <li>LongSword</li>
          <li>Lance</li>
        </weaponTags>
      </value>
    </match>
    <!-- If the first XPATH does not exist, the original code stands. -->
  </Operation>
  <Operation Class="PatchOperationConditional">
    <!-- Does this exist? -->
    <xpath>/Defs/ThingDef[defName="VFEC_Apparel_LegionnaireArmor"]</xpath>
    <!-- If it does, do this replacement. -->
    <match Class="PatchOperationReplace">
      <success>Always</success>
      <xpath>/Defs/PawnKindDef[defName="VFEC_Centurion"]/apparelTags</xpath>
      <value>
        <apparelTags>
          <li>RomeCivil</li>
          <li>RomeOfficer</li>
          <li>Centurion</li>
          <li>RomeLegion</li>
        </apparelTags>
      </value>
    </match>
    <!-- If the first XPATH does not exist, the original code stands. -->
  </Operation>
  <Operation Class="PatchOperationConditional">
    <!-- Does this exist? -->
    <xpath>/Defs/ThingDef[defName="VFEC_Apparel_LegionnaireArmor"]</xpath>
    <!-- If it does, add this. -->
    <match Class="PatchOperationAdd">
      <success>Always</success>
      <xpath>/Defs/PawnKindDef[defName="VFEC_Praetorian"]/weaponTags</xpath>
      <value>
        <li>RomeSoldier</li>
        <li>LongSword</li>
        <li>NeolithicHeavy</li>
        <li>NeolithicMeleeHeavy</li>
        <li>NeolithicMeleeAdvanced</li>
      </value>
    </match>
    <!-- If the first XPATH does not exist, the original code stands. -->
  </Operation>
  <Operation Class="PatchOperationConditional">
    <!-- Does this exist? -->
    <xpath>/Defs/ThingDef[defName="VFEC_Apparel_LegionnaireArmor"]</xpath>
    <!-- If it does, do this replacement. -->
    <match Class="PatchOperationReplace">
      <success>Always</success>
      <xpath>/Defs/PawnKindDef[defName="VFEC_Praetorian"]/apparelTags</xpath>
      <value>
        <apparelTags>
          <li>RomeOfficer</li>
          <li>Praetorian</li>
        </apparelTags>
      </value>
    </match>
    <!-- If the first XPATH does not exist, the original code stands. -->
  </Operation>

  <Operation Class="PatchOperationConditional">
    <!-- Does this exist? -->
    <xpath>/Defs/ThingDef[defName="VFEC_Apparel_LegionnaireArmor"]</xpath>
    <!-- If it does, add this. -->
    <match Class="PatchOperationAdd">
      <success>Always</success>
      <xpath>/Defs/FactionDef[@Name="VFEC_RepublicBase"]/pawnGroupMakers/li[kindDef="Combat"]/options</xpath>
      <value>
        <AR_Hoplite>1</AR_Hoplite>
        <AR_HopliteHeavy>1</AR_HopliteHeavy>
        <TSP_AR_Aquilifer MayRequire="zal.legionaryequipment">0.5</TSP_AR_Aquilifer>
      </value>
    </match>
  </Operation>
  <Operation Class="PatchOperationConditional">
    <!-- Does this exist? -->
    <xpath>/Defs/ThingDef[defName="VFEC_Apparel_LegionnaireArmor"]</xpath>
    <!-- If it does, add this. -->
    <match Class="PatchOperationAdd">
      <success>Always</success>
      <xpath>/Defs/FactionDef[@Name="VFEC_RepublicBase"]/pawnGroupMakers/li[kindDef="Trader"]/traders</xpath>
      <value>
        <AR_Trader>1</AR_Trader>
      </value>
    </match>
  </Operation>
  <Operation Class="PatchOperationConditional">
    <!-- Does this exist? -->
    <xpath>/Defs/ThingDef[defName="VFEC_Apparel_LegionnaireArmor"]</xpath>
    <!-- If it does, add this. -->
    <match Class="PatchOperationAdd">
      <success>Always</success>
      <xpath>/Defs/FactionDef[@Name="VFEC_RepublicBase"]/pawnGroupMakers/li[kindDef="Peaceful"]/options</xpath>
      <value>
        <AR_Citizen>35</AR_Citizen>
        <TSP_AR_CitizenGirl>20</TSP_AR_CitizenGirl>
        <AR_Hoplite>20</AR_Hoplite>
        <AR_HopliteHeavy>10</AR_HopliteHeavy>
      </value>
    </match>
  </Operation>
  <Operation Class="PatchOperationConditional">
    <!-- Does this exist? -->
    <xpath>/Defs/ThingDef[defName="VFEC_Apparel_LegionnaireArmor"]</xpath>
    <!-- If it does, do this replacement. -->
    <match Class="PatchOperationReplace">
      <success>Always</success>
      <xpath>/Defs/FactionDef[@Name="VFEC_RepublicBase"]/pawnGroupMakers/li[kindDef="Settlement"]/options</xpath>
      <value>
        <options>
          <VFEC_RepublicVillager>200</VFEC_RepublicVillager>
          <VFEC_TownGuard>80</VFEC_TownGuard>
          <VFEC_RepublicArcher>50</VFEC_RepublicArcher>
          <VFEC_RepublicAuxilia>40</VFEC_RepublicAuxilia>
          <VFEC_Legionnaire>50</VFEC_Legionnaire>
          <VFEC_Centurion>20</VFEC_Centurion>
          <VFEC_Praetorian>18</VFEC_Praetorian>
          <VFEC_ScorpionOperator>15</VFEC_ScorpionOperator>
          <VFEC_RepublicSenator>80</VFEC_RepublicSenator>
          <AR_Citizen>100</AR_Citizen>
          <AR_Councilman>15</AR_Councilman>
          <AR_Preatorian>15</AR_Preatorian>
          <AR_Hastatus>35</AR_Hastatus>
          <AR_Sagittarius>55</AR_Sagittarius>
          <AR_Triarius>50</AR_Triarius>
          <AR_Centurion>15</AR_Centurion>
          <AR_Legionary>30</AR_Legionary>
          <AR_General>30</AR_General>
          <AR_Hoplite>50</AR_Hoplite>
          <AR_HopliteHeavy>40</AR_HopliteHeavy>
          <TSP_AR_CitizenGirl>45</TSP_AR_CitizenGirl>
          <TSP_AR_Aquilifer MayRequire="zal.legionaryequipment">5</TSP_AR_Aquilifer>
        </options>
      </value>
    </match>
  </Operation>
  <Operation Class="PatchOperationConditional">
    <!-- Does this exist? -->
    <xpath>/Defs/ThingDef[defName="VFEC_Apparel_LegionnaireArmor"]</xpath>
    <!-- If it does, do this replacement. -->
    <match Class="PatchOperationReplace">
      <success>Always</success>
      <xpath>/Defs/FactionDef[@Name="VFEC_RepublicBase"]/pawnGroupMakers/li[kindDef="Settlement_RangedOnly"]/options</xpath>
      <value>
        <options>
          <VFEC_RepublicArcher>40</VFEC_RepublicArcher>
          <VFEC_RepublicAuxilia>50</VFEC_RepublicAuxilia>
          <VFEC_ScorpionOperator>10</VFEC_ScorpionOperator>
          <AR_Sagittarius>60</AR_Sagittarius>
          <AR_Toxotes>45</AR_Toxotes>
          <AR_General>50</AR_General>
          <TSP_AR_Aquilifer MayRequire="zal.legionaryequipment">1</TSP_AR_Aquilifer>
        </options>
      </value>
    </match>
  </Operation>
</Patch>